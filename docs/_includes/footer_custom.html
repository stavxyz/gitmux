<script>
var STORAGE_KEY = 'jtd-theme';

function getTheme() {
  return localStorage.getItem(STORAGE_KEY) || 'dark';
}

function setTheme(theme) {
  localStorage.setItem(STORAGE_KEY, theme);
  var links = document.getElementsByTagName('link');
  for (var i = 0; i < links.length; i++) {
    var href = links[i].href;
    if (theme === 'dark' && href.indexOf('just-the-docs-default') !== -1) {
      links[i].href = href.replace('just-the-docs-default', 'just-the-docs-dark');
    } else if (theme === 'light' && href.indexOf('just-the-docs-dark') !== -1) {
      links[i].href = href.replace('just-the-docs-dark', 'just-the-docs-default');
    }
  }
}

var themeLinks = document.querySelectorAll('a[href="#theme-toggle"]');

for (var i = 0; i < themeLinks.length; i++) {
  var link = themeLinks[i];
  link.style.cssText = 'cursor:pointer; border:1px solid currentColor; border-radius:4px; padding:2px 8px;';
  link.title = 'Toggle light/dark theme';
  var currentTheme = getTheme();
  link.textContent = currentTheme === 'dark' ? 'Light' : 'Dark';
  link.href = 'javascript:void(0)';
  link.addEventListener('click', function(e) {
    e.preventDefault();
    e.stopPropagation();
    var curr = getTheme();
    var next = curr === 'dark' ? 'light' : 'dark';
    setTheme(next);
    this.textContent = next === 'dark' ? 'Light' : 'Dark';
  });
}
</script>
