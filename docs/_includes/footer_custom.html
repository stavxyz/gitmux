<script>
// Theme toggle - runs after DOM is loaded
(function() {
  var STORAGE_KEY = 'jtd-theme';

  function getTheme() {
    return localStorage.getItem(STORAGE_KEY) || 'dark';
  }

  function setTheme(theme) {
    localStorage.setItem(STORAGE_KEY, theme);
    var links = document.getElementsByTagName('link');
    for (var i = 0; i < links.length; i++) {
      var href = links[i].href;
      if (href && href.indexOf('just-the-docs-') !== -1 && href.indexOf('.css') !== -1) {
        if (theme === 'dark') {
          links[i].href = href.replace('just-the-docs-default', 'just-the-docs-dark');
        } else {
          links[i].href = href.replace('just-the-docs-dark', 'just-the-docs-default');
        }
      }
    }
  }

  // Find all theme toggle links and convert them
  var themeLinks = document.querySelectorAll('a[href="#theme-toggle"]');
  for (var i = 0; i < themeLinks.length; i++) {
    var link = themeLinks[i];
    link.textContent = getTheme() === 'dark' ? 'Light' : 'Dark';
    link.href = 'javascript:void(0)';
    link.onclick = function(e) {
      e.preventDefault();
      var newTheme = getTheme() === 'dark' ? 'light' : 'dark';
      setTheme(newTheme);
      // Update all toggle links
      var allLinks = document.querySelectorAll('a[href="javascript:void(0)"]');
      for (var j = 0; j < allLinks.length; j++) {
        if (allLinks[j].textContent === 'Light' || allLinks[j].textContent === 'Dark') {
          allLinks[j].textContent = newTheme === 'dark' ? 'Light' : 'Dark';
        }
      }
    };
  }
})();
</script>
